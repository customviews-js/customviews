<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>CustomViews Test</title>
  <style>
    body {
      font-family: sans-serif;
      padding: 1rem;
    }

    [data-customviews-toggle].hidden {
      display: none;
    }
  </style>
</head>
<body>
  <h1>CustomViews.js Test Page</h1>

  <!-- Placeholders -->

  <h2>Placeholder</h2>
  <div data-customviews-placeholder="logo" style="width:150px; height:150px;"></div>

  <div data-customviews-placeholder="logo" data-customviews-id="staticAsset">
    This is a logo that has the value itself. not dynamically rendered.
  </div>

  <h2>Toggles</h2>

  <div data-customviews-toggle="beginner" data-customviews-id="intro">  
  </div>  

  <div data-customviews-toggle="beginner">    
    <h2>Beginner View</h2>
    <p>This content is only visible in the "beginner" view.</p>

  </div>

  <div data-customviews-toggle="advanced" data-customviews-id="advancedIntro">    
  </div>

  <div data-customviews-toggle="advanced">    
    <h2>Advanced View</h2>
    <p>This content is only visible in the "advanced" view.</p>
    Hello Hello

  </div>

  <div data-customviews-toggle="expert" data-customviews-id="expertIntro">    
  </div>

  <div data-customviews-toggle="expert">    
    <h2>Expert View</h2>
    <p>This content is only visible in the "expert" view.</p>

  </div>

  <!-- Widget container for inline demo -->
  <div id="widget-container" style="margin: 20px 0; padding: 20px; border: 2px dashed #ccc; border-radius: 8px;">
    <h3>Inline Widget Demo</h3>
    <p>The widget will appear below:</p>
    <div id="inline-widget-target"></div>
  </div>

  <script type="module">
    import { CustomViews, CustomViewsWidget }  from "../../dist/custom-views.esm.js";

    const localConfigPaths = {
      profileA: "./configs/profileA.json",
      profileB: "./configs/profileB.json"
    };

    // Initialize CustomViews
    const customviews = await CustomViews.initFromJson({
      assetsJsonPath: './configs/assets.json',
      defaultStateJsonPath: './configs/defaultState.json',
      localConfigPaths,
      rootEl: document.body
    });

    // Create floating widget (top-right)
    const floatingWidget = new CustomViewsWidget({
      core: customviews,
      position: 'top-right',
      theme: 'auto',
      title: 'View Controls'
    });
    floatingWidget.render();

    // Create inline widget
    const inlineWidget = new CustomViewsWidget({
      core: customviews,
      container: document.getElementById('inline-widget-target'),
      position: 'inline',
      theme: 'light',
      title: 'Custom Views Settings'
    });
    inlineWidget.render();

    // Log current view changes
    customviews.onViewChange = (stateId, state) => {
      console.log('View changed:', { stateId, state });
      // Update both widgets when view changes
      floatingWidget.updateWidgetState();
      inlineWidget.updateWidgetState();
    };
  </script>
</body>
</html>
